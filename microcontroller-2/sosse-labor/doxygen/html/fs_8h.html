<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SOSSE: fs.h File Reference</title>
<link href="sos.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>fs.h File Reference</h1>File system declarations. <a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="types_8h-source.html">types.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="fstream_8h-source.html">fstream.h</a>&gt;</code><br>

<p>
<a href="fs_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structs__fpath.html">s_fpath</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">File path specifier.  <a href="structs__fpath.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structs__finfo.html">s_finfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">File info struct. This is directly written as a file header in the file system.  <a href="structs__finfo.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#f16ffe1e067c0ea1b1e911c36becf620">FS_TYPE_DF</a>&nbsp;&nbsp;&nbsp;0x38</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">File type DF.  <a href="#f16ffe1e067c0ea1b1e911c36becf620"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#c1246e5b596fad2ca69d5740720dce64">FS_TYPE_EF</a>&nbsp;&nbsp;&nbsp;0x00</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">File type EF.  <a href="#c1246e5b596fad2ca69d5740720dce64"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#1031facaa31a457c28f86cf221f16bc0">FS_HEADER_SIZE</a>&nbsp;&nbsp;&nbsp;sizeof(<a class="el" href="structs__finfo.html">S_FINFO</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of the file header, which is the same as S_FINFO.  <a href="#1031facaa31a457c28f86cf221f16bc0"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structs__fpath.html">s_fpath</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#05724eefbb251b0605e377d023303f40">S_FPATH</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">File path specifier.  <a href="#05724eefbb251b0605e377d023303f40"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structs__finfo.html">s_finfo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#69886b9db44928da9d4b49d46de14687">S_FINFO</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">File info struct. This is directly written as a file header in the file system.  <a href="#69886b9db44928da9d4b49d46de14687"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#fb19e37469a751aa61de3dcd0c70b4b0">fs_init</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize file system variables.  <a href="#fb19e37469a751aa61de3dcd0c70b4b0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#4d8d9be27ddc2dcba0f38f8e27f470d7">fs_seek</a> (<a class="el" href="types_8h.html#f78b002cffb8a135ab10841bc49e3e14">iu16</a> fid, <a class="el" href="structs__fstream.html">S_FSTREAM</a> *fs, <a class="el" href="structs__finfo.html">S_FINFO</a> *fi, <a class="el" href="types_8h.html#95a7dea5cbac1a117a50dccc69944d6e">iu8</a> type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Look for a file in a stream.  <a href="#4d8d9be27ddc2dcba0f38f8e27f470d7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#17c9e75dcbad83e1e24dfc89286fbc2b">fs_seekEnd</a> (<a class="el" href="structs__fstream.html">S_FSTREAM</a> *fs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Look for the end of files in the stream.  <a href="#17c9e75dcbad83e1e24dfc89286fbc2b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#53716a136dbb532afc17ffc353b9d69c">fs_getData</a> (<a class="el" href="structs__fpath.html">S_FPATH</a> *fp, <a class="el" href="structs__fstream.html">S_FSTREAM</a> *fs, <a class="el" href="structs__finfo.html">S_FINFO</a> *fi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get stream and info for a file specified as a path.  <a href="#53716a136dbb532afc17ffc353b9d69c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#69a59c2c985e21a61a4bbeb844ed900b">fs_getFPath</a> (<a class="el" href="types_8h.html#f78b002cffb8a135ab10841bc49e3e14">iu16</a> fid, <a class="el" href="structs__fpath.html">S_FPATH</a> *fp, <a class="el" href="structs__fstream.html">S_FSTREAM</a> *fs, <a class="el" href="structs__finfo.html">S_FINFO</a> *fi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get path, stream and info for a file specified as a FID.  <a href="#69a59c2c985e21a61a4bbeb844ed900b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#5b9133c311ff42d94c92599c2a9d9d96">fs_delete</a> (<a class="el" href="types_8h.html#f78b002cffb8a135ab10841bc49e3e14">iu16</a> fid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete file specified as fid.  <a href="#5b9133c311ff42d94c92599c2a9d9d96"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#f3cd0f092dc20a811aefb18cda7b0260">fs_create</a> (<a class="el" href="structs__finfo.html">S_FINFO</a> *fi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The function creates a file.  <a href="#f3cd0f092dc20a811aefb18cda7b0260"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structs__fpath.html">S_FPATH</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#fa513b91ca575d59f5d6c481a521ab17">selected</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Path specified of the currently selected file.  <a href="#fa513b91ca575d59f5d6c481a521ab17"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
File system declarations. 
<p>
SOSSE implements a very simple file system. Each file starts with following header:<p>
<ul>
<li>2 Byte: Content size</li><li>2 Byte: ID</li><li>1 Byte: Type</li><li>1 Byte: Access conditions</li></ul>
<p>
Directly after that the content area is located. If the file is a DF, this content area is directly used to add header/content sequences.<p>
After the content area of a file, a content size of 0 must be writen as an end of data marker. This means the data capacity of a MF or DF is the total content size of it minus 2.<p>
Currently the file system support only one level of DFs, i.e. the maximum depth is MF:DF:EF.<p>
There are probably a lot optimization possibilities in this file system, but I think this is not bad for my first designed and implemented file system.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>Here are certainly some optimizations possible to reduce code size.</dd></dl>
<dl compact><dt><b>Id</b></dt><dd><a class="el" href="fs_8h.html">fs.h</a>,v 1.13 2002/12/22 15:42:55 m Exp </dd></dl>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="1031facaa31a457c28f86cf221f16bc0"></a><!-- doxytag: member="fs.h::FS_HEADER_SIZE" ref="1031facaa31a457c28f86cf221f16bc0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_HEADER_SIZE&nbsp;&nbsp;&nbsp;sizeof(<a class="el" href="structs__finfo.html">S_FINFO</a>)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Size of the file header, which is the same as S_FINFO. 
<p>

</div>
</div><p>
<a class="anchor" name="f16ffe1e067c0ea1b1e911c36becf620"></a><!-- doxytag: member="fs.h::FS_TYPE_DF" ref="f16ffe1e067c0ea1b1e911c36becf620" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_TYPE_DF&nbsp;&nbsp;&nbsp;0x38          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
File type DF. 
<p>

</div>
</div><p>
<a class="anchor" name="c1246e5b596fad2ca69d5740720dce64"></a><!-- doxytag: member="fs.h::FS_TYPE_EF" ref="c1246e5b596fad2ca69d5740720dce64" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_TYPE_EF&nbsp;&nbsp;&nbsp;0x00          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
File type EF. 
<p>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="69886b9db44928da9d4b49d46de14687"></a><!-- doxytag: member="fs.h::S_FINFO" ref="69886b9db44928da9d4b49d46de14687" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structs__finfo.html">s_finfo</a>  <a class="el" href="structs__finfo.html">S_FINFO</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
File info struct. This is directly written as a file header in the file system. 
<p>

</div>
</div><p>
<a class="anchor" name="05724eefbb251b0605e377d023303f40"></a><!-- doxytag: member="fs.h::S_FPATH" ref="05724eefbb251b0605e377d023303f40" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structs__fpath.html">s_fpath</a>  <a class="el" href="structs__fpath.html">S_FPATH</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
File path specifier. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>There is probably a potential for simplification, when the file type (DF/EF) is not handled so rigid. </dd></dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="f3cd0f092dc20a811aefb18cda7b0260"></a><!-- doxytag: member="fs.h::fs_create" ref="f3cd0f092dc20a811aefb18cda7b0260" args="(S_FINFO *fi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a> fs_create           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structs__finfo.html">S_FINFO</a> *&nbsp;</td>
          <td class="paramname"> <em>fi</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The function creates a file. 
<p>
The functions creates a file with the data in <em>fi</em>. The current file must be a MF or DF. In case the current file is a DF, the file, which should be created, can't be a DF.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fi</em>&nbsp;</td><td>Pointer to S_FINFO, which contains the data of the file to create.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TRUE</em>&nbsp;</td><td>on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FALSE</em>&nbsp;</td><td>on failure. Error code given in sw. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="5b9133c311ff42d94c92599c2a9d9d96"></a><!-- doxytag: member="fs.h::fs_delete" ref="5b9133c311ff42d94c92599c2a9d9d96" args="(iu16 fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a> fs_delete           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#f78b002cffb8a135ab10841bc49e3e14">iu16</a>&nbsp;</td>
          <td class="paramname"> <em>fid</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete file specified as fid. 
<p>
The function looks for the fid in the current file, which must be a MF or DF. The file, which should be deleted must be the last one in the current MF or DF.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>ID of the file to delete.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TRUE</em>&nbsp;</td><td>on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FALSE</em>&nbsp;</td><td>on failure. Error code given in sw. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="53716a136dbb532afc17ffc353b9d69c"></a><!-- doxytag: member="fs.h::fs_getData" ref="53716a136dbb532afc17ffc353b9d69c" args="(S_FPATH *fp, S_FSTREAM *fs, S_FINFO *fi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a> fs_getData           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structs__fpath.html">S_FPATH</a> *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structs__fstream.html">S_FSTREAM</a> *&nbsp;</td>
          <td class="paramname"> <em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structs__finfo.html">S_FINFO</a> *&nbsp;</td>
          <td class="paramname"> <em>fi</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get stream and info for a file specified as a path. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fp</em>&nbsp;</td><td>Pointer to S_FPATH, which is used to supply the information about the file wanted. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fs</em>&nbsp;</td><td>Pointer to S_FSTREAM, which will be filled with data on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fi</em>&nbsp;</td><td>Pointer to S_FINFO, which will be filled with data on success.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TRUE</em>&nbsp;</td><td>on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FALSE</em>&nbsp;</td><td>on failure. Error code given in sw. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="69a59c2c985e21a61a4bbeb844ed900b"></a><!-- doxytag: member="fs.h::fs_getFPath" ref="69a59c2c985e21a61a4bbeb844ed900b" args="(iu16 fid, S_FPATH *fp, S_FSTREAM *fs, S_FINFO *fi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a> fs_getFPath           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#f78b002cffb8a135ab10841bc49e3e14">iu16</a>&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structs__fpath.html">S_FPATH</a> *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structs__fstream.html">S_FSTREAM</a> *&nbsp;</td>
          <td class="paramname"> <em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structs__finfo.html">S_FINFO</a> *&nbsp;</td>
          <td class="paramname"> <em>fi</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get path, stream and info for a file specified as a FID. 
<p>
The file is searched for in the order described in the SELECT FILE documentation on the main page.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>File ID to look for. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fp</em>&nbsp;</td><td>Pointer to S_FPATH, which will be filled with data on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fs</em>&nbsp;</td><td>Pointer to S_FSTREAM, which will be filled with data on success. This can be NULL when no data is wanted. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fi</em>&nbsp;</td><td>Pointer to S_FINFO, which will be filled with data on success. This can be NULL when no data is wanted.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TRUE</em>&nbsp;</td><td>on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FALSE</em>&nbsp;</td><td>on failure. Error code given in sw. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="fb19e37469a751aa61de3dcd0c70b4b0"></a><!-- doxytag: member="fs.h::fs_init" ref="fb19e37469a751aa61de3dcd0c70b4b0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a> fs_init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize file system variables. 
<p>
This looks e.g. for the start of the file system and it's size. It must be called after each reset.<p>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TRUE</em>&nbsp;</td><td>on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FALSE</em>&nbsp;</td><td>on failure. Error code given in sw. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="4d8d9be27ddc2dcba0f38f8e27f470d7"></a><!-- doxytag: member="fs.h::fs_seek" ref="4d8d9be27ddc2dcba0f38f8e27f470d7" args="(iu16 fid, S_FSTREAM *fs, S_FINFO *fi, iu8 type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a> fs_seek           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#f78b002cffb8a135ab10841bc49e3e14">iu16</a>&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structs__fstream.html">S_FSTREAM</a> *&nbsp;</td>
          <td class="paramname"> <em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structs__finfo.html">S_FINFO</a> *&nbsp;</td>
          <td class="paramname"> <em>fi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#95a7dea5cbac1a117a50dccc69944d6e">iu8</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Look for a file in a stream. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>File ID to look for. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fs</em>&nbsp;</td><td>Pointer to S_FSTREAM, where the FID is searched for. It returns on success a stream on the file found. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fi</em>&nbsp;</td><td>Pointer to S_FINFO, which will be filled with data on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Type of file wanted.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TRUE</em>&nbsp;</td><td>on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FALSE</em>&nbsp;</td><td>on failure. Error code given in sw.</td></tr>
  </table>
</dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>There is probably a potential for simplification, when the file type is not handled so rigid. </dd></dl>

</div>
</div><p>
<a class="anchor" name="17c9e75dcbad83e1e24dfc89286fbc2b"></a><!-- doxytag: member="fs.h::fs_seekEnd" ref="17c9e75dcbad83e1e24dfc89286fbc2b" args="(S_FSTREAM *fs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#97a80ca1602ebf2303258971a2c938e2">bool</a> fs_seekEnd           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structs__fstream.html">S_FSTREAM</a> *&nbsp;</td>
          <td class="paramname"> <em>fs</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Look for the end of files in the stream. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fs</em>&nbsp;</td><td>Pointer to S_FSTREAM, which supplies a directory stream and which will be used to return the end position on success.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TRUE</em>&nbsp;</td><td>on success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FALSE</em>&nbsp;</td><td>on failure. Error code given in sw. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="fa513b91ca575d59f5d6c481a521ab17"></a><!-- doxytag: member="fs.h::selected" ref="fa513b91ca575d59f5d6c481a521ab17" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structs__fpath.html">S_FPATH</a> <a class="el" href="fs_8h.html#fa513b91ca575d59f5d6c481a521ab17">selected</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Path specified of the currently selected file. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Saving here a S_FINFO and/or S_FSTREAM of the selected file might reduce the code size. </dd></dl>

</div>
</div><p>
<hr><address><small>
Copyright 2002 by Matthias Bruestle. This is licensed under the GNU
General Public License.
</small></address>
</body>
</html>
