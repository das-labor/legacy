   1               		.file	"text.c"
   2               		.arch atmega32
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  11               		.text
  12               	.Ltext0:
  99               	.global	draw_Text
 101               	draw_Text:
   1:text.c        **** #include "grafiklcd.h"
   2:text.c        **** 
   3:text.c        **** #include "font_small6.h"
   4:text.c        **** 
   5:text.c        **** #define MAX_FONTS 1
   6:text.c        **** 
   7:text.c        **** font fonts[MAX_FONTS];
   8:text.c        **** 
   9:text.c        **** 
  10:text.c        **** void draw_Text(char *str, unsigned int posx, char posy, unsigned char fontNr, 
  11:text.c        ****                unsigned char space, unsigned char color) {
 103               	.LM1:
 104               	/* prologue: frame size=0 */
 105 0000 2F92      		push r2
 106 0002 3F92      		push r3
 107 0004 4F92      		push r4
 108 0006 5F92      		push r5
 109 0008 6F92      		push r6
 110 000a 7F92      		push r7
 111 000c 8F92      		push r8
 112 000e 9F92      		push r9
 113 0010 AF92      		push r10
 114 0012 BF92      		push r11
 115 0014 CF92      		push r12
 116 0016 DF92      		push r13
 117 0018 EF92      		push r14
 118 001a FF92      		push r15
 119 001c 0F93      		push r16
 120 001e 1F93      		push r17
 121 0020 CF93      		push r28
 122 0022 DF93      		push r29
 123               	/* prologue end (size=18) */
 124 0024 4C01      		movw r8,r24
 125 0026 242E      		mov r2,r20
 126 0028 522E      		mov r5,r18
 127 002a 302E      		mov r3,r16
 128 002c 4E2C      		mov r4,r14
  12:text.c        **** 	unsigned char byte, align;
  13:text.c        ****     char x, y, glyph = *str;
 130               	.LM2:
 131 002e FC01      		movw r30,r24
 132 0030 4081      		ld r20,Z
  14:text.c        **** 	unsigned int charC, charEnd;
  15:text.c        **** 	
  16:text.c        **** 	fonts[0] = font_small6;
 134               	.LM3:
 135 0032 A0E0      		ldi r26,lo8(fonts)
 136 0034 B0E0      		ldi r27,hi8(fonts)
 137 0036 E0E0      		ldi r30,lo8(font_small6)
 138 0038 F0E0      		ldi r31,hi8(font_small6)
 139 003a 29E0      		ldi r18,lo8(9)
 140               	.L2:
 142               	.LM4:
 143 003c 0190      		ld r0,Z+
 144 003e 0D92      		st X+,r0
 145 0040 2150      		subi r18,lo8(-(-1))
 146 0042 E1F7      		brne .L2
  17:text.c        **** 
  18:text.c        **** 	align = fonts[fontNr].storebytes - 1;
 148               	.LM5:
 149 0044 852D      		mov r24,r5
 150 0046 9927      		clr r25
 151 0048 FC01      		movw r30,r24
 152 004a 13E0      		ldi r17,3
 153 004c EE0F      	1:	lsl r30
 154 004e FF1F      		rol r31
 155 0050 1A95      		dec r17
 156 0052 E1F7      		brne 1b
 157 0054 E80F      		add r30,r24
 158 0056 F91F      		adc r31,r25
 159 0058 E050      		subi r30,lo8(-(fonts))
 160 005a F040      		sbci r31,hi8(-(fonts))
 161 005c 0085      		ldd r16,Z+8
 162 005e 0150      		subi r16,lo8(-(-1))
  19:text.c        **** 
  20:text.c        ****     if (fontNr >= MAX_FONTS) 
  21:text.c        **** 		fontNr = MAX_FONTS - 1;
 164               	.LM6:
 165 0060 522E      		mov r5,r18
  22:text.c        **** 	if ((glyph < fonts[fontNr].glyph_beg) || (glyph > fonts[fontNr].glyph_end)) {
 167               	.LM7:
 168 0062 242F      		mov r18,r20
 169 0064 3327      		clr r19
 170 0066 27FD      		sbrc r18,7
 171 0068 3095      		com r19
 172 006a 8091 0000 		lds r24,fonts+5
 173 006e 9927      		clr r25
 174 0070 2817      		cp r18,r24
 175 0072 3907      		cpc r19,r25
 176 0074 34F0      		brlt .L5
 177 0076 8091 0000 		lds r24,fonts+6
 178 007a 9927      		clr r25
 179 007c 8217      		cp r24,r18
 180 007e 9307      		cpc r25,r19
 181 0080 14F4      		brge .L4
 182               	.L5:
  23:text.c        ****        glyph = fonts[fontNr].glyph_def;
 184               	.LM8:
 185 0082 4091 0000 		lds r20,fonts+7
 186               	.L4:
  24:text.c        ****     } 
  25:text.c        **** 	glyph -= fonts[fontNr].glyph_beg;
 188               	.LM9:
 189 0086 E0E0      		ldi r30,lo8(fonts)
 190 0088 F0E0      		ldi r31,hi8(fonts)
 191 008a 8581      		ldd r24,Z+5
 192 008c 481B      		sub r20,r24
 193               	.LBB2:
  26:text.c        **** 	charC = pgm_read_word(fonts[fontNr].fontIndex+glyph);
 195               	.LM10:
 196 008e 842F      		mov r24,r20
 197 0090 9927      		clr r25
 198 0092 87FD      		sbrc r24,7
 199 0094 9095      		com r25
 200 0096 880F      		add r24,r24
 201 0098 991F      		adc r25,r25
 202 009a 2181      		ldd r18,Z+1
 203 009c 3281      		ldd r19,Z+2
 204 009e F901      		movw r30,r18
 205 00a0 E80F      		add r30,r24
 206 00a2 F91F      		adc r31,r25
 207               	.LBE2:
 208               	/* #APP */
 209 00a4 C591      		lpm r28, Z+
 210 00a6 D491      		lpm r29, Z
 211               		
 212               	/* #NOAPP */
 213               	.LBB3:
  27:text.c        **** 	charEnd = pgm_read_word(fonts[fontNr].fontIndex+glyph+1);
 215               	.LM11:
 216 00a8 F901      		movw r30,r18
 217 00aa E80F      		add r30,r24
 218 00ac F91F      		adc r31,r25
 219 00ae 3296      		adiw r30,2
 220               	.LBE3:
 221               	/* #APP */
 222 00b0 C590      		lpm r12, Z+
 223 00b2 D490      		lpm r13, Z
 224               		
 225               	/* #NOAPP */
 226               	.L34:
  28:text.c        **** 	// skip part outside the display
  29:text.c        **** 	while (posx > NUM_COLS) { 
  30:text.c        **** 	    if (charC < charEnd) {                  
  31:text.c        ****             charC++;
  32:text.c        ****         } 
  33:text.c        ****         if (charC >= charEnd) {
  34:text.c        ****             x += space;
  35:text.c        ****             if (!(glyph = *++str)) return;      
  36:text.c        ****             if ((glyph < fonts[fontNr].glyph_beg) || (glyph > fonts[fontNr].glyph_end)) {      
  37:text.c        ****                glyph = fonts[fontNr].glyph_def;
  38:text.c        ****             } 
  39:text.c        ****             glyph -= fonts[fontNr].glyph_beg;   
  40:text.c        ****             charC = pgm_read_word(fonts[fontNr].fontIndex+glyph);
  41:text.c        ****             charEnd = pgm_read_word(fonts[fontNr].fontIndex+glyph+1);
  42:text.c        ****         }
  43:text.c        ****         posx--;
 228               	.LM12:
 229 00b4 6138      		cpi r22,129
 230 00b6 7105      		cpc r23,__zero_reg__
 231 00b8 08F4      		brsh .+2
 232 00ba 4DC0      		rjmp .L30
 234               	.LM13:
 235 00bc CC15      		cp r28,r12
 236 00be DD05      		cpc r29,r13
 237 00c0 08F4      		brsh .L8
 239               	.LM14:
 240 00c2 2196      		adiw r28,1
 241               	.L8:
 243               	.LM15:
 244 00c4 CC15      		cp r28,r12
 245 00c6 DD05      		cpc r29,r13
 246 00c8 08F4      		brsh .+2
 247 00ca 42C0      		rjmp .L9
 249               	.LM16:
 250 00cc 0894      		sec
 251 00ce 811C      		adc r8,__zero_reg__
 252 00d0 911C      		adc r9,__zero_reg__
 253 00d2 F401      		movw r30,r8
 254 00d4 4081      		ld r20,Z
 255 00d6 4423      		tst r20
 256 00d8 09F4      		brne .+2
 257 00da D4C0      		rjmp .L1
 259               	.LM17:
 260 00dc A42F      		mov r26,r20
 261 00de BB27      		clr r27
 262 00e0 A7FD      		sbrc r26,7
 263 00e2 B095      		com r27
 264 00e4 252D      		mov r18,r5
 265 00e6 3327      		clr r19
 266 00e8 F901      		movw r30,r18
 267 00ea C3E0      		ldi r28,3
 268 00ec EE0F      	1:	lsl r30
 269 00ee FF1F      		rol r31
 270 00f0 CA95      		dec r28
 271 00f2 E1F7      		brne 1b
 272 00f4 E20F      		add r30,r18
 273 00f6 F31F      		adc r31,r19
 274 00f8 E050      		subi r30,lo8(-(fonts))
 275 00fa F040      		sbci r31,hi8(-(fonts))
 276 00fc 8581      		ldd r24,Z+5
 277 00fe 9927      		clr r25
 278 0100 A817      		cp r26,r24
 279 0102 B907      		cpc r27,r25
 280 0104 2CF0      		brlt .L12
 281 0106 8681      		ldd r24,Z+6
 282 0108 9927      		clr r25
 283 010a 8A17      		cp r24,r26
 284 010c 9B07      		cpc r25,r27
 285 010e 0CF4      		brge .L11
 286               	.L12:
 288               	.LM18:
 289 0110 4781      		ldd r20,Z+7
 290               	.L11:
 292               	.LM19:
 293 0112 F901      		movw r30,r18
 294 0114 A3E0      		ldi r26,3
 295 0116 EE0F      	1:	lsl r30
 296 0118 FF1F      		rol r31
 297 011a AA95      		dec r26
 298 011c E1F7      		brne 1b
 299 011e E20F      		add r30,r18
 300 0120 F31F      		adc r31,r19
 301 0122 E050      		subi r30,lo8(-(fonts))
 302 0124 F040      		sbci r31,hi8(-(fonts))
 303 0126 8581      		ldd r24,Z+5
 304 0128 481B      		sub r20,r24
 305               	.LBB4:
 307               	.LM20:
 308 012a 842F      		mov r24,r20
 309 012c 9927      		clr r25
 310 012e 87FD      		sbrc r24,7
 311 0130 9095      		com r25
 312 0132 880F      		add r24,r24
 313 0134 991F      		adc r25,r25
 314 0136 2181      		ldd r18,Z+1
 315 0138 3281      		ldd r19,Z+2
 316 013a F901      		movw r30,r18
 317 013c E80F      		add r30,r24
 318 013e F91F      		adc r31,r25
 319               	.LBE4:
 320               	/* #APP */
 321 0140 C591      		lpm r28, Z+
 322 0142 D491      		lpm r29, Z
 323               		
 324               	/* #NOAPP */
 325               	.LBB5:
 327               	.LM21:
 328 0144 F901      		movw r30,r18
 329 0146 E80F      		add r30,r24
 330 0148 F91F      		adc r31,r25
 331 014a 3296      		adiw r30,2
 332               	.LBE5:
 333               	/* #APP */
 334 014c C590      		lpm r12, Z+
 335 014e D490      		lpm r13, Z
 336               		
 337               	/* #NOAPP */
 338               	.L9:
 340               	.LM22:
 341 0150 6150      		subi r22,lo8(-(-1))
 342 0152 7040      		sbci r23,hi8(-(-1))
 343 0154 AFCF      		rjmp .L34
 344               	.L30:
  44:text.c        ****     }
  45:text.c        **** 	for (x = posx; x >= 0; x++) {
 346               	.LM23:
 347 0156 762E      		mov r7,r22
 348 0158 6623      		tst r22
 349 015a 0CF4      		brge .+2
 350 015c 93C0      		rjmp .L1
 351               	.L28:
 352               	.LBB6:
  46:text.c        ****         byte = pgm_read_byte(fonts[fontNr].fontData+charC);
 354               	.LM24:
 355 015e E52C      		mov r14,r5
 356 0160 FF24      		clr r15
 357 0162 F701      		movw r30,r14
 358 0164 63E0      		ldi r22,3
 359 0166 EE0F      	1:	lsl r30
 360 0168 FF1F      		rol r31
 361 016a 6A95      		dec r22
 362 016c E1F7      		brne 1b
 363 016e EE0D      		add r30,r14
 364 0170 FF1D      		adc r31,r15
 365 0172 E050      		subi r30,lo8(-(fonts))
 366 0174 F040      		sbci r31,hi8(-(fonts))
 367 0176 0380      		ldd __tmp_reg__,Z+3
 368 0178 F481      		ldd r31,Z+4
 369 017a E02D      		mov r30,__tmp_reg__
 370 017c EC0F      		add r30,r28
 371 017e FD1F      		adc r31,r29
 372               	/* #APP */
 373 0180 6490      		lpm r6, Z
 374               		
 375               	/* #NOAPP */
 376               	.LBE6:
  47:text.c        **** 
  48:text.c        **** 		for (y = posy; y < 8+posy; y++) {
 378               	.LM25:
 379 0182 122D      		mov r17,r2
 380 0184 222D      		mov r18,r2
 381 0186 3327      		clr r19
 382 0188 27FD      		sbrc r18,7
 383 018a 3095      		com r19
 384 018c 5901      		movw r10,r18
 385               	.L21:
  49:text.c        **** 			if (byte & (1 << (y-posy)) && y-posy >= 0 && y >= 0 
 387               	.LM26:
 388 018e 862D      		mov r24,r6
 389 0190 9927      		clr r25
 390 0192 2A19      		sub r18,r10
 391 0194 3B09      		sbc r19,r11
 392 0196 022E      		mov r0,r18
 393 0198 02C0      		rjmp 2f
 394 019a 9595      	1:	asr r25
 395 019c 8795      		ror r24
 396 019e 0A94      	2:	dec r0
 397 01a0 E2F7      		brpl 1b
 398 01a2 80FF      		sbrs r24,0
 399 01a4 09C0      		rjmp .L19
 400 01a6 37FD      		sbrc r19,7
 401 01a8 07C0      		rjmp .L19
 402 01aa 17FD      		sbrc r17,7
 403 01ac 05C0      		rjmp .L19
  50:text.c        **** 			    && x < NUM_COLS) {	
  51:text.c        ****                dispSetPix(x, y, color);
 405               	.LM27:
 406 01ae 442D      		mov r20,r4
 407 01b0 612F      		mov r22,r17
 408 01b2 872D      		mov r24,r7
 409 01b4 0E94 0000 		call dispSetPix
 410               	.L19:
 412               	.LM28:
 413 01b8 1F5F      		subi r17,lo8(-(1))
 414 01ba 212F      		mov r18,r17
 415 01bc 3327      		clr r19
 416 01be 27FD      		sbrc r18,7
 417 01c0 3095      		com r19
 418 01c2 C501      		movw r24,r10
 419 01c4 0896      		adiw r24,8
 420 01c6 2817      		cp r18,r24
 421 01c8 3907      		cpc r19,r25
 422 01ca 0CF3      		brlt .L21
  52:text.c        **** 			}	
  53:text.c        **** 		}
  54:text.c        **** 	
  55:text.c        **** 		if (charC < charEnd) {
 424               	.LM29:
 425 01cc CC15      		cp r28,r12
 426 01ce DD05      		cpc r29,r13
 427 01d0 08F4      		brsh .L22
  56:text.c        ****             charC++;
 429               	.LM30:
 430 01d2 2196      		adiw r28,1
 431               	.L22:
  57:text.c        ****         } 
  58:text.c        ****         if (charC >= charEnd) {
 433               	.LM31:
 434 01d4 CC15      		cp r28,r12
 435 01d6 DD05      		cpc r29,r13
 436 01d8 08F4      		brsh .+2
 437 01da 41C0      		rjmp .L23
  59:text.c        ****             x += space;
 439               	.LM32:
 440 01dc 730C      		add r7,r3
  60:text.c        ****             if (!(glyph = *++str)) return;      
 442               	.LM33:
 443 01de 0894      		sec
 444 01e0 811C      		adc r8,__zero_reg__
 445 01e2 911C      		adc r9,__zero_reg__
 446 01e4 F401      		movw r30,r8
 447 01e6 4081      		ld r20,Z
 448 01e8 4423      		tst r20
 449 01ea 09F4      		brne .+2
 450 01ec 4BC0      		rjmp .L1
  61:text.c        ****             if ((glyph < fonts[fontNr].glyph_beg) || (glyph > fonts[fontNr].glyph_end)) {      
 452               	.LM34:
 453 01ee 242F      		mov r18,r20
 454 01f0 3327      		clr r19
 455 01f2 27FD      		sbrc r18,7
 456 01f4 3095      		com r19
 457 01f6 F701      		movw r30,r14
 458 01f8 53E0      		ldi r21,3
 459 01fa EE0F      	1:	lsl r30
 460 01fc FF1F      		rol r31
 461 01fe 5A95      		dec r21
 462 0200 E1F7      		brne 1b
 463 0202 EE0D      		add r30,r14
 464 0204 FF1D      		adc r31,r15
 465 0206 E050      		subi r30,lo8(-(fonts))
 466 0208 F040      		sbci r31,hi8(-(fonts))
 467 020a 8581      		ldd r24,Z+5
 468 020c 9927      		clr r25
 469 020e 2817      		cp r18,r24
 470 0210 3907      		cpc r19,r25
 471 0212 2CF0      		brlt .L26
 472 0214 8681      		ldd r24,Z+6
 473 0216 9927      		clr r25
 474 0218 8217      		cp r24,r18
 475 021a 9307      		cpc r25,r19
 476 021c 0CF4      		brge .L25
 477               	.L26:
  62:text.c        ****                glyph = fonts[fontNr].glyph_def;
 479               	.LM35:
 480 021e 4781      		ldd r20,Z+7
 481               	.L25:
  63:text.c        ****             } 
  64:text.c        ****             glyph  -= fonts[fontNr].glyph_beg;   
 483               	.LM36:
 484 0220 F701      		movw r30,r14
 485 0222 33E0      		ldi r19,3
 486 0224 EE0F      	1:	lsl r30
 487 0226 FF1F      		rol r31
 488 0228 3A95      		dec r19
 489 022a E1F7      		brne 1b
 490 022c EE0D      		add r30,r14
 491 022e FF1D      		adc r31,r15
 492 0230 E050      		subi r30,lo8(-(fonts))
 493 0232 F040      		sbci r31,hi8(-(fonts))
 494 0234 8581      		ldd r24,Z+5
 495 0236 481B      		sub r20,r24
 496               	.LBB7:
  65:text.c        ****             charC   = pgm_read_word(fonts[fontNr].fontIndex+glyph);
 498               	.LM37:
 499 0238 842F      		mov r24,r20
 500 023a 9927      		clr r25
 501 023c 87FD      		sbrc r24,7
 502 023e 9095      		com r25
 503 0240 880F      		add r24,r24
 504 0242 991F      		adc r25,r25
 505 0244 2181      		ldd r18,Z+1
 506 0246 3281      		ldd r19,Z+2
 507 0248 F901      		movw r30,r18
 508 024a E80F      		add r30,r24
 509 024c F91F      		adc r31,r25
 510               	.LBE7:
 511               	/* #APP */
 512 024e C591      		lpm r28, Z+
 513 0250 D491      		lpm r29, Z
 514               		
 515               	/* #NOAPP */
 516               	.LBB8:
  66:text.c        ****             charEnd = pgm_read_word(fonts[fontNr].fontIndex+glyph+1);
 518               	.LM38:
 519 0252 F901      		movw r30,r18
 520 0254 E80F      		add r30,r24
 521 0256 F91F      		adc r31,r25
 522 0258 3296      		adiw r30,2
 523               	.LBE8:
 524               	/* #APP */
 525 025a C590      		lpm r12, Z+
 526 025c D490      		lpm r13, Z
 527               		
 528               	/* #NOAPP */
 529               	.L23:
  67:text.c        ****         }
  68:text.c        **** 		align++;
 531               	.LM39:
 532 025e 0F5F      		subi r16,lo8(-(1))
  69:text.c        **** 		if (!align) {
 534               	.LM40:
 535 0260 71F4      		brne .L16
  70:text.c        ****     		align = fonts[fontNr].storebytes - 1;
 537               	.LM41:
 538 0262 852D      		mov r24,r5
 539 0264 9927      		clr r25
 540 0266 FC01      		movw r30,r24
 541 0268 23E0      		ldi r18,3
 542 026a EE0F      	1:	lsl r30
 543 026c FF1F      		rol r31
 544 026e 2A95      		dec r18
 545 0270 E1F7      		brne 1b
 546 0272 E80F      		add r30,r24
 547 0274 F91F      		adc r31,r25
 548 0276 E050      		subi r30,lo8(-(fonts))
 549 0278 F040      		sbci r31,hi8(-(fonts))
 550 027a 0085      		ldd r16,Z+8
 551 027c 0150      		subi r16,lo8(-(-1))
 552               	.L16:
 554               	.LM42:
 555 027e 7394      		inc r7
 556 0280 77FE      		sbrs r7,7
 557 0282 6DCF      		rjmp .L28
 558               	.L1:
 559               	/* epilogue: frame size=0 */
 560 0284 DF91      		pop r29
 561 0286 CF91      		pop r28
 562 0288 1F91      		pop r17
 563 028a 0F91      		pop r16
 564 028c FF90      		pop r15
 565 028e EF90      		pop r14
 566 0290 DF90      		pop r13
 567 0292 CF90      		pop r12
 568 0294 BF90      		pop r11
 569 0296 AF90      		pop r10
 570 0298 9F90      		pop r9
 571 029a 8F90      		pop r8
 572 029c 7F90      		pop r7
 573 029e 6F90      		pop r6
 574 02a0 5F90      		pop r5
 575 02a2 4F90      		pop r4
 576 02a4 3F90      		pop r3
 577 02a6 2F90      		pop r2
 578 02a8 0895      		ret
 579               	/* epilogue end (size=19) */
 580               	/* function draw_Text size 371 (334) */
 609               	.Lscope0:
 610               		.comm fonts,9,1
 612               		.text
 614               	Letext:
 615               	/* File "text.c": code  371 = 0x0173 ( 334), prologues  18, epilogues  19 */
DEFINED SYMBOLS
                            *ABS*:00000000 text.c
     /tmp/cc1NCzEE.s:3      *ABS*:0000003f __SREG__
     /tmp/cc1NCzEE.s:4      *ABS*:0000003e __SP_H__
     /tmp/cc1NCzEE.s:5      *ABS*:0000003d __SP_L__
     /tmp/cc1NCzEE.s:6      *ABS*:00000000 __tmp_reg__
     /tmp/cc1NCzEE.s:7      *ABS*:00000001 __zero_reg__
     /tmp/cc1NCzEE.s:101    .text:00000000 draw_Text
                            *COM*:00000009 fonts
     /tmp/cc1NCzEE.s:614    .text:000002aa Letext

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
font_small6
dispSetPix
